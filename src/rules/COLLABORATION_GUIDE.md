# 协作开发指南

## 🤝 **团队协作原则**

### 核心原则
- **代码质量优先** - 提交前必须通过所有检查
- **文档同步更新** - 代码变更必须同步更新文档
- **沟通优先** - 有疑问先沟通，避免重复工作
- **小步快跑** - 频繁提交，小批量变更

## 🌿 **分支管理策略**

### 分支结构
```
main (主分支)
├── develop (开发分支)
├── feature/功能名称 (功能分支)
├── bugfix/问题描述 (修复分支)
└── hotfix/紧急修复 (热修复分支)
```

### 分支命名规范
- **功能分支**: `feature/功能名称` (如: `feature/user-authentication`)
- **修复分支**: `bugfix/问题描述` (如: `bugfix/login-validation`)
- **热修复**: `hotfix/紧急描述` (如: `hotfix/security-patch`)
- **文档分支**: `docs/文档类型` (如: `docs/api-reference`)

### 分支工作流程
1. **创建分支**: 从 `develop` 分支创建功能分支
2. **开发功能**: 在功能分支上开发
3. **代码审查**: 创建 Pull Request 进行代码审查
4. **合并分支**: 审查通过后合并到 `develop`
5. **发布测试**: 定期将 `develop` 合并到 `main` 进行测试

## 📝 **代码提交规范**

### 提交信息格式
```
类型(范围): 简短描述

详细描述（可选）

影响范围（可选）
```

### 提交类型
- **feat**: 新功能
- **fix**: 修复bug
- **docs**: 文档更新
- **style**: 代码格式调整
- **refactor**: 代码重构
- **test**: 测试相关
- **chore**: 构建过程或辅助工具的变动

### 提交示例
```
feat(game): 添加新的资产类型

- 新增商品期货资产
- 实现动态收益率计算
- 添加风险提示功能

影响: 资产分配界面、收益计算逻辑
```

## 🔄 **协作开发流程**

### 1. 开始新功能开发
```bash
# 1. 更新开发分支
git checkout develop
git pull origin develop

# 2. 创建功能分支
git checkout -b feature/new-feature

# 3. 开始开发...
```

### 2. 开发过程中的提交
```bash
# 频繁提交，保持提交粒度小
git add .
git commit -m "feat: 实现用户登录验证逻辑"

# 推送到远程分支
git push origin feature/new-feature
```

### 3. 完成功能开发
```bash
# 1. 确保代码通过所有检查
npm run lint
npm run build
npm run test

# 2. 更新文档
# 3. 创建 Pull Request
```

### 4. 代码审查流程
1. **创建PR**: 从功能分支到 `develop` 分支
2. **填写模板**: 使用PR模板描述变更
3. **代码审查**: 至少1名团队成员审查
4. **CI检查**: 确保所有自动化检查通过
5. **合并代码**: 审查通过后合并

## 📚 **文档协作规范**

### 必须更新的文档
- **代码变更**: 更新相关组件文档
- **API变更**: 更新接口文档
- **配置变更**: 更新配置说明
- **新增功能**: 更新功能说明文档

### 文档更新检查清单
- [ ] 功能说明已更新
- [ ] API接口已记录
- [ ] 使用示例已添加
- [ ] 变更记录已添加
- [ ] 相关文档已同步

## 🧪 **测试和质量管理**

### 测试要求
- **单元测试**: 新功能必须包含单元测试
- **集成测试**: 关键流程必须包含集成测试
- **E2E测试**: 用户核心流程必须包含端到端测试

### 代码质量检查
- **Lint检查**: 必须通过ESLint检查
- **类型检查**: TypeScript类型必须正确
- **构建检查**: 必须能够成功构建
- **性能检查**: 新功能不能显著影响性能

## 🚫 **禁止事项**

### 代码层面
- ❌ 直接提交到 `main` 分支
- ❌ 提交未测试的代码
- ❌ 提交包含调试信息的代码
- ❌ 提交过大的变更（超过500行）

### 协作层面
- ❌ 不沟通直接修改他人代码
- ❌ 忽略代码审查意见
- ❌ 不更新相关文档
- ❌ 使用不明确的提交信息

## 🔧 **开发环境设置**

### 必需工具
- Node.js 18+
- Git 2.30+
- VS Code (推荐)
- 项目配置的扩展插件

### 环境配置
```bash
# 1. 克隆项目
git clone https://github.com/Rothschild888/legacy-guardians.git

# 2. 安装依赖
npm install

# 3. 启动开发服务器
npm run dev

# 4. 运行测试
npm run test

# 5. 代码检查
npm run lint
```

## 📞 **沟通渠道**

### 日常沟通
- **GitHub Issues**: 功能需求和bug报告
- **GitHub Discussions**: 技术讨论和决策
- **Pull Request**: 代码审查和讨论
- **Commit Messages**: 变更说明

### 紧急情况
- **Security Issues**: 安全相关问题
- **Critical Bugs**: 影响核心功能的严重bug
- **Production Issues**: 生产环境问题

## ✅ **协作检查清单**

### 开始开发前
- [ ] 了解项目架构和代码规范
- [ ] 阅读相关文档和规则
- [ ] 确认开发环境和工具
- [ ] 与团队沟通开发计划

### 开发过程中
- [ ] 遵循代码规范和架构设计
- [ ] 频繁提交和推送代码
- [ ] 及时更新相关文档
- [ ] 与团队保持沟通

### 完成开发后
- [ ] 代码通过所有质量检查
- [ ] 文档已同步更新
- [ ] 创建Pull Request
- [ ] 参与代码审查

---

*最后更新: 2024-12-19*
*更新原因: 建立团队协作开发指南*
